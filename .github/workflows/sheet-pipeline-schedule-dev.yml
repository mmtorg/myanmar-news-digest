name: Schedule (call develop sheet-pipeline)

on:
    schedule:
        # 15:30 MMT（=09:00 UTC）
        - cron: "0 9 * * *"
        # 17:30 / 19:30 / 21:30 MMT（=11:00 / 13:00 / 15:00 UTC）
        - cron: "0 11 * * *"
        - cron: "0 13 * * *"
        - cron: "0 15 * * *"
        # 02:30 MMT（=20:00 UTC 前日）
        - cron: "0 20 * * *"

jobs:
    collect16:
        if: github.event.schedule == '0 9 * * *'
        uses: ./.github/workflows/sheet-pipeline.yml
        with:
            mode: collect16
            ref: develop
        secrets: inherit

    collect:
        if: contains(fromJson('["0 11 * * *","0 13 * * *","0 15 * * *"]'), github.event.schedule)
        uses: ./.github/workflows/sheet-pipeline.yml
        with:
            mode: collect
            ref: develop
        secrets: inherit

    build_bundle:
        if: github.event.schedule == '0 20 * * *'
        uses: ./.github/workflows/sheet-pipeline.yml
        with:
            mode: build-bundle
            ref: develop
        secrets: inherit
